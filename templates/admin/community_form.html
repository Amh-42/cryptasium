{% extends "admin/base.html" %}

{% block title %}{% if post %}Edit{% else %}New{% endif %} Community Post | Admin{% endblock %}

{% block page_title %}{% if post %}Edit{% else %}New{% endif %} Community Post{% endblock %}

{% block content %}
<div class="page-header">
    <div>
        <h1 class="page-title">{% if post %}Edit{% else %}New{% endif %} Community Post</h1>
        <p style="color: var(--text-muted); font-size: 14px; margin-top: 4px;">{% if post %}Update your community post{% else %}Create a new community post{% endif %}</p>
    </div>
    <div class="page-actions">
        <a href="{{ url_for('admin_community_list') }}" class="btn btn-outline">
            <i class="ph ph-arrow-left"></i>
            Back
        </a>
    </div>
</div>

<div class="filament-table-container" style="padding: 32px;">
    <form method="POST">
        <div style="display: grid; gap: 24px; max-width: 600px;">
            <div>
                <label>Title *</label>
                <input type="text" name="title" value="{{ post.title if post else '' }}" required placeholder="Enter post title">
            </div>

            <div>
                <label>Content *</label>
                <textarea name="content" rows="8" required placeholder="Write your community post content...">{{ post.content if post else '' }}</textarea>
            </div>

            <div>
                <label>Author</label>
                <input type="text" name="author" value="{{ post.author if post else 'Community Member' }}">
            </div>

            <div>
                <label>Category</label>
                <select name="category">
                    <option value="">Select category...</option>
                    <option value="Discussion" {% if post and post.category == 'Discussion' %}selected{% endif %}>Discussion</option>
                    <option value="Question" {% if post and post.category == 'Question' %}selected{% endif %}>Question</option>
                    <option value="Announcement" {% if post and post.category == 'Announcement' %}selected{% endif %}>Announcement</option>
                    <option value="Project" {% if post and post.category == 'Project' %}selected{% endif %}>Project</option>
                </select>
            </div>

            <div>
                <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; margin-bottom: 0;">
                    <input type="checkbox" name="published" {% if post and post.published %}checked{% endif %} style="width: 18px; height: 18px; accent-color: var(--accent);">
                    <span>Publish immediately</span>
                </label>
            </div>

            <div style="display: flex; gap: 12px; padding-top: 8px;">
                <button type="submit" class="btn btn-primary">
                    <i class="ph ph-{% if post %}check{% else %}plus{% endif %}"></i>
                    {% if post %}Update{% else %}Create{% endif %} Post
                </button>
                <a href="{{ url_for('admin_community_list') }}" class="btn btn-outline">Cancel</a>
            </div>
        </div>
    </form>
</div>
{% endblock %}
