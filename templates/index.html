{% extends "base.html" %}

{% block title %}Cryptasium | An element of mystery.{% endblock %}
{% block meta_title %}Cryptasium | An element of mystery.{% endblock %}
{% block meta_description %}Cryptasium produces cinematic, Netflix-grade documentaries about technology, AI, and software engineering. 1,000 tech entrepreneurs by 2033.{% endblock %}
{% block meta_keywords %}Cryptasium, tech documentaries, AI education, software engineering, programming tutorials, technology YouTube, developer content, tech entrepreneur{% endblock %}
{% block canonical_url %}https://cryptasium.com{% endblock %}
{% block og_url %}https://cryptasium.com{% endblock %}
{% block twitter_url %}https://cryptasium.com{% endblock %}

{% block content %}
<!-- HERO SECTION -->
<header>
    <div class="container">
        <div class="hero-visual reveal">
            <div id="crystal-container"></div>
        </div>
        
        <div class="reveal">
            <div class="tag">● DIGITAL MEDIA</div>
            <h1>CRYPTASIUM</h1>
            <p class="hero-desc">An element of mystery.</p>
            <div style="display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;">
                <a href="{{ url_for('youtube_list') }}" class="btn btn-primary">Watch Latest</a>
                <a href="{{ url_for('blog_list') }}" class="btn btn-outline">Explore Topics</a>
            </div>
        </div>
    </div>
</header>

<!-- FEATURE SPLIT -->
<section class="feature-split container" style="padding: 80px 24px;">
    <div class="split-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 60px; align-items: center;">
        <div class="reveal">
            <video class="hero-reel" autoplay loop muted playsinline>
                <source src="{{ url_for('static', filename='3D1.mp4') }}" type="video/mp4">
            </video>
        </div>
        <div class="reveal">
            <h2 style="font-size: 48px; font-weight: 700; line-height: 1.1; margin-bottom: 24px;">Deep dives for the armchair engineer.</h2>
            <p style="color: var(--text-muted); font-size: 18px; margin-bottom: 32px;">Gone are the days of dry tutorials. We break down the world's most complex algorithms and systems using high-end 3D visuals and narrative storytelling.</p>
            <div style="display: flex; gap: 16px; margin-top: 32px; flex-wrap: wrap;">
                <div style="display: flex; align-items: center; gap: 12px; padding: 16px; background: rgba(255,255,255,0.05); border: 1px solid var(--border); border-radius: 8px; color: var(--text-muted); font-size: 14px;">
                    <i class="ph ph-youtube-logo" style="color: var(--accent); font-size: 20px;"></i> Long Form
                </div>
                <div style="display: flex; align-items: center; gap: 12px; padding: 16px; background: rgba(255,255,255,0.05); border: 1px solid var(--border); border-radius: 8px; color: var(--text-muted); font-size: 14px;">
                    <i class="ph ph-tiktok-logo" style="color: var(--accent); font-size: 20px;"></i> Shorts & Reels
                </div>
            </div>
        </div>
    </div>
</section>

<style>
    .hero-reel {
        width: 100%;
        height: 400px;
        object-fit: cover;
        border-radius: 16px;
        border: 1px solid var(--border);
        background: rgba(20, 20, 20, 0.5);
    }

    .ecosystem-reel {
        width: 100%;
        aspect-ratio: 16 / 9;
        object-fit: cover;
        border-radius: 24px;
        border: 1px solid var(--border);
        background: rgba(20, 20, 20, 0.5);
    }

    @media (max-width: 768px) {
        .feature-split {
            padding: 60px 16px !important;
        }

        .split-grid {
            grid-template-columns: 1fr !important;
            gap: 40px !important;
        }

        .split-grid h2 {
            font-size: 32px !important;
        }

        .hero-reel {
            height: 250px;
        }
    }
</style>

<!-- CONTENT ECOSYSTEM -->
<section class="global-network container" style="padding: 80px 24px; text-align: center;">
    <div class="reveal">
        <span style="color: var(--accent); font-family: var(--font-mono); font-size: 14px; letter-spacing: 1px;">ECOSYSTEM</span>
        <h2 style="font-size: 56px; margin: 16px 0 40px;">A universe of knowledge<br>across every platform.</h2>
    </div>

    <div class="globe-container reveal" style="width: 100%; max-width: 1000px; margin: 60px auto; padding: 0 24px;">
        <video class="ecosystem-reel" autoplay loop muted playsinline>
            <source src="{{ url_for('static', filename='3D-2.mp4') }}" type="video/mp4">
        </video>
    </div>

    <div class="stats-grid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; text-align: left; padding: 0 24px;">
        <div class="stat-card reveal">
            <h3 style="font-size: 18px; margin-bottom: 12px; display: flex; align-items: center; gap: 8px;">
                <i class="ph ph-youtube-logo" style="color: var(--accent);"></i> Video Essays
            </h3>
            <p style="font-size: 14px; color: var(--text-muted); line-height: 1.5;">Cinematic deep dives into software history, system architecture, and AI breakthroughs available in 4K.</p>
        </div>
        <div class="stat-card reveal">
            <h3 style="font-size: 18px; margin-bottom: 12px; display: flex; align-items: center; gap: 8px;">
                <i class="ph ph-microphone" style="color: var(--accent);"></i> The Podcast
            </h3>
            <p style="font-size: 14px; color: var(--text-muted); line-height: 1.5;">Conversations with engineers, futurists, and creators about the ethics and philosophy of technology.</p>
        </div>
        <div class="stat-card reveal">
            <h3 style="font-size: 18px; margin-bottom: 12px; display: flex; align-items: center; gap: 8px;">
                <i class="ph ph-read-cv-logo" style="color: var(--accent);"></i> Technical Blog
            </h3>
            <p style="font-size: 14px; color: var(--text-muted); line-height: 1.5;">Written companions to our videos, providing code snippets, references, and further reading materials.</p>
        </div>
    </div>
</section>

<style>
    @media (max-width: 768px) {
        .global-network {
            padding: 60px 16px !important;
        }

        .global-network h2 {
            font-size: 32px !important;
            line-height: 1.2 !important;
        }

        .globe-container {
            margin: 40px auto !important;
            padding: 0 !important;
        }

        .stats-grid {
            grid-template-columns: 1fr !important;
            gap: 16px !important;
            padding: 0 !important;
        }

        .stat-card {
            padding: 24px !important;
        }
    }

    /* Stat card styling */
    .stat-card {
        background: var(--bg-card);
        border: 1px solid var(--border);
        padding: 32px;
        border-radius: 16px;
        transition: all 0.3s;
    }
    
    .stat-card:hover {
        border-color: var(--accent);
        transform: translateY(-2px);
    }
    
    .stat-card h3 {
        color: var(--text-main);
    }
    
    /* Light mode specific */
    [data-theme="light"] .stat-card {
        background: var(--bg-card);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }
    
    [data-theme="light"] .stat-card:hover {
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
    }
</style>

<!-- LATEST CONTENT PREVIEW -->
{% if latest_blog or latest_videos or latest_shorts %}
<section class="container" style="padding: 80px 24px;">
    <div class="reveal">
        <h2 style="font-size: 48px; text-align: center; margin-bottom: 60px;">Latest Content</h2>
    </div>
    <div class="content-grid">
        {% if latest_blog %}
        <div class="content-card reveal">
            <div class="video-placeholder" style="height: 200px; margin-bottom: 20px;">
                <i class="ph ph-article placeholder-icon"></i>
                <span class="placeholder-text">Latest Article</span>
            </div>
            <h3 style="margin-bottom: 12px;"><a href="{{ url_for('blog_detail', slug=latest_blog.slug) }}">{{ latest_blog.title }}</a></h3>
            <p style="color: var(--text-muted); font-size: 14px; margin-bottom: 16px;">{{ latest_blog.excerpt or 'Read the full article...' }}</p>
            <span style="color: var(--text-muted); font-size: 12px; font-family: var(--font-mono);">{{ latest_blog.created_at.strftime('%b %d, %Y') if latest_blog.created_at else '' }}</span>
        </div>
        {% endif %}
        
        {% if latest_videos %}
        {% for video in latest_videos[:3] %}
        <div class="content-card reveal">
            <div class="video-placeholder" style="height: 200px; margin-bottom: 20px;">
                <i class="ph ph-play-circle placeholder-icon"></i>
                <span class="placeholder-text">{{ video.title }}</span>
            </div>
            <h3 style="margin-bottom: 12px;">{{ video.title }}</h3>
            <p style="color: var(--text-muted); font-size: 14px; margin-bottom: 16px;">{{ video.description[:100] if video.description else '' }}...</p>
            <span style="color: var(--text-muted); font-size: 12px; font-family: var(--font-mono);">{{ video.duration or '' }} • {{ video.created_at.strftime('%b %d') if video.created_at else '' }}</span>
        </div>
        {% endfor %}
        {% endif %}
    </div>
</section>
{% endif %}
{% endblock %}

{% block extra_css %}
<style>
    #crystal-container {
        width: 100%;
        height: 400px;
        position: relative;
        cursor: grab;
    }
    
    #crystal-container:active {
        cursor: grabbing;
    }
    
    #crystal-container canvas {
        width: 100% !important;
        height: 100% !important;
        display: block;
    }
    
    @media (max-width: 768px) {
        #crystal-container {
            height: 300px;
        }
    }
</style>
{% endblock %}

{% block extra_js %}
<!-- Three.js for 3D Crystal (deferred for performance) -->
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/OBJLoader.min.js"></script>

<script>
// Wait for Three.js to load
window.addEventListener('load', function() {
    const container = document.getElementById('crystal-container');
    if (!container || typeof THREE === 'undefined') return;

    // Scene setup
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(50, container.clientWidth / container.clientHeight, 1, 1000);
    camera.position.z = 10;
    
    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setPixelRatio(window.devicePixelRatio || 1);
    renderer.setSize(container.clientWidth, container.clientHeight);
    renderer.setClearColor(0x000000, 0);
    container.appendChild(renderer.domElement);

    // Orbit controls
    const controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.dampingFactor = 0.05;
    controls.enableZoom = true;
    controls.enablePan = false;
    controls.minDistance = 5;
    controls.maxDistance = 20;
    controls.autoRotate = true;
    controls.autoRotateSpeed = 1.5;

    // Crystal mesh
    let crystalColorMod = 0xff2222; // Accent color
    const crystalMesh = new THREE.Mesh();
    crystalMesh.position.set(0, -1, 0);
    scene.add(crystalMesh);

    // Load crystal model
    const loader_obj = new THREE.OBJLoader();
    loader_obj.load('https://assets.codepen.io/95637/crystal_1.obj', (object) => {
        crystalMesh.geometry = object.children[0].geometry;
    });

    // Load textures and create material
    const loader_tex = new THREE.TextureLoader();
    const crystalMat = new THREE.MeshPhongMaterial({
        color: crystalColorMod,
        map: loader_tex.load('https://assets.codepen.io/95637/crystal_1_Base_Color_desat.jpg'),
        normalMap: loader_tex.load('https://assets.codepen.io/95637/crystal_1_Normal.jpg'),
        specularMap: loader_tex.load('https://assets.codepen.io/95637/crystal_1_Specular.jpg'),
        emissiveMap: loader_tex.load('https://assets.codepen.io/95637/crystal_1_Emissive.jpg'),
        emissive: crystalColorMod,
        emissiveIntensity: 0.15,
        specular: 0xffffff,
        opacity: 0.9,
        transparent: true,
        shininess: 100
    });
    crystalMesh.material = crystalMat;

    // Lights
    const spot1 = new THREE.SpotLight(0xffffff);
    spot1.position.set(24, 10, 10);
    spot1.angle = 0.45;
    spot1.penumbra = 0.2;
    spot1.intensity = 1;
    scene.add(spot1);

    const point1 = new THREE.PointLight(0xff2222);
    point1.position.set(-8, 4, 15);
    point1.intensity = 0.8;
    scene.add(point1);

    const point2 = new THREE.PointLight(0xffffff);
    point2.position.set(10, -2, -19);
    point2.intensity = 0.25;
    scene.add(point2);

    const point3 = new THREE.PointLight(0xff2222);
    point3.position.set(-2, 10, 10);
    point3.intensity = 0.42;
    scene.add(point3);

    const point4 = new THREE.PointLight(0xffffff);
    point4.position.set(-2, 5, -60);
    point4.intensity = 0.5;
    scene.add(point4);

    // Ambient light for overall illumination
    const ambientLight = new THREE.AmbientLight(0x404040, 0.5);
    scene.add(ambientLight);


    // Handle resize
    function onWindowResize() {
        if (!container) return;
        camera.aspect = container.clientWidth / container.clientHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(container.clientWidth, container.clientHeight);
    }
    window.addEventListener('resize', onWindowResize);

    // Floating animation
    let floatTime = 0;
    
    // Animation loop
    function animate() {
        requestAnimationFrame(animate);
        
        // Floating effect
        floatTime += 0.02;
        crystalMesh.position.y = -1 + Math.sin(floatTime) * 0.3;
        
        controls.update();
        renderer.render(scene, camera);
    }
    
    animate();
});
</script>
{% endblock %}

